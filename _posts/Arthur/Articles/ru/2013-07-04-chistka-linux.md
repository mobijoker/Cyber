---
lang: ru
ref: chistka-linux
title: Чистка Linux
date: 2013-07-04
author: Arthur Gareginyan
translator: Arthur Gareginyan
layout: post
permalink: /ru/linux/chistka-linux.html
categories:
  - Debian/Ubuntu
  - Linux
  - Raspberry Pi

---

![thumb](/images/thumbnail/Clean-linux.png)
Чистим Linux от мусора.


### Определение объёма занятого и свободного пространства.

Определим объём занятого и свободного пространства на диске:

```sh
df -h
```

> **Примечание:** Параметр `h` необходим для вывода сведений в привычных мегабайтах.

В выводе команды будут сведения о том каков объем дискового пространства во всех смонтированных файловых системах, сколько занято и сколько еще свободно.

Определим объём занятого и свободного пространства на конкретном диске:

```sh
df -h /dev/sda1
```

> **Примечание:** Программа `df` выводит сведения только о примонтированных устройствах и разделах.


### Определение количества и объёма заданных файлов и директорий.

Программа `du` позволяет узнать, сколько места занимает конкретный файл или директория. Она пригодится для определения самых больших файлов и директорий в качестве кандидатов на удаление в борьбе за свободное место.

*Пример:*

```sh
du -ms /home/user/
```

> **Примечание:** Параметр `m` необходим для вывода сведений в привычных мегабайтах. Параметр `s` необходим для вывода только суммарного объема каталога.

Если не использовать пареметр  `s` тогда в выводе будут данные об объеме каждого подкаталога и файла в указанном каталоге.

```sh
du -m /home/user/
```

С параметром `S` в выводе будут сведения только об объеме подкаталогов но не файлов. 

```sh
du -mS /home/user/
```


### Чистка корзины из консоли.

Найдём весь мусор в системе:

```sh
locate Trash
```

> **Примечание:** Именно `Trash` а не `trash`

Очистим корзину полностью:

```sh
sudo rm -rf ~/.local/share/Trash/files/*
```

> **Примечание:** Параметр `r` используется для рекурсивного удаления (удалять поддиректории с вложенными файлами). 
Параметр `f` (force) используется для игнорирования ошибок связанных с несуществующими файлами и для того, чтобы не запрашивались подтверждения операций.

`~/.local/share/Trash/files/` - Путь по которому находятся удалённые файлы (мусор в корзине). А тильда и слеш (`~/`) короткий адрес домашней директории, используемый вместо “/home/user/”.

Я использую программу синхронизации файлов BitTorrentSync который имеет свою корзину расположенную по пути `/home/user/btsync/.SyncTrash/`. 

Очистим корзину BitTorrentSync:

```sh
sudo rm -rf ~/btsync/.SyncTrash/*
```


### Чистка кэша apt.

Все когда-либо скачанные нами пакеты (apt) складываются у нас на диске в локальный репозиторий и автоматически никогда не удаляются.

**apt-get clean** - Команда `clean` используется для того, чтобы освободить дисковое пространство путем очистки полученных пакетов из локального репозитория, другими словами очищает кэш apt расположенный по пути `/var/cache/apt/archives/`

**apt-get autoclean** - От `clean` отличается тем, что удаляет кеш только тех пакетов которые больше не могут быть скачаны (например устаревшие версии пакетов) и тем самым бесполезны.

**apt-get autoremove** - Команда autoremove используется для автоматического удаления пакетов, которые были установлены для удовлетворения зависимостей для других пакетов и теперь больше не нужны.

Очистим локальный репозиторий от ненужных пакетов и удалим ненужные зависимости:

```sh
sudo apt-get autoclean
sudo apt-get autoremove
```

Или очистим локальный репозиторий полностью и удалим ненужные зависимости:

```sh
sudo apt-get clean
sudo apt-get autoremove
```
