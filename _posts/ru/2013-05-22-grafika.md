---
lang: ru
ref: grafika
title: Графика в консоли Ubuntu
date: 2013-05-22T07:13:25+00:00
author: Arthur Gareginyan
layout: post
permalink: /ru/linux/grafika.html
categories:
  - Debian/Ubuntu
  - Linux
tags:
  - fbcon
  - framebuffer
  - grub
  - ubuntu
  - vesafb
  - графика

---

![thumb](/images/screenshot.png)
В версии Ubuntu 7.10 и выше - framebuffer выключен по умолчанию. Для того чтобы включить его мы проделаем ниже описанное.

В качестве текстового редактора я буду использовать программу nano, но вы можете использовать любой другой редактор.

**1.** Открываем файл `/etc/modprobe.d/blacklist-framebuffer` :
 
```sh
sudo nano /etc/modprobe.d/blacklist-framebuffer
```

закомментируем строку:
 
	#blacklist vesafb

и сохраняем файл.

**2.** Открываем файл `/etc/initramfs-tools/modules` :
 
```sh
sudo nano /etc/initramfs-tools/modules
``` 

добавляем строки:
 
	fbcon
	vesafb

и сохраняем файл.

**3.** Пересобираем initramfs image
 
```sh
sudo update-initramfs -u
```

**4.** Редактируем GRUB2

Открываем файл `/etc/default/grub`

В конец строки `GRUB_CMDLINE_LINUX_DEFAULT` добавляем параметр `vga=0x31b`.   Где `0x31b` - код нужного вам разрешения, которое можно найти одним из двух ниже приведённых вариантов.

Пример из моего grub:
 
	GRUB_CMDLINE_LINUX_DEFAULT="splash quiet"

я изменил на
 
	GRUB_CMDLINE_LINUX_DEFAULT="splash quiet vga=0x31b"

А если хотите чтобы framebuffer работало и в `recovery mode`, тогда измените 
 
	GRUB_CMDLINE_LINUX=""

на
 
	GRUB_CMDLINE_LINUX="vga= 0x31b"

У вас в  `GRUB_CMDLINE_LINUX=""`, в кавычках могут быть и другие параметры. В таком случае просто допишите к имеющемуся в конец.

**5.** Применяем изменения для Grub:
 
```sh
sudo update-grub
```



Выбор поддерживаемого разрешения:

<table>
      <caption>Таблица кодов разрешений:</caption>
           <tr><th></th><th>640x480</th><th>800x600</th><th>1024x768</th><th>1280x1024</th></tr>
           <tr><td>256</td><td>0x301</td><td>0x303</td><th>0x305</th><th>0x307</th></tr>
           <tr><td>32 тыс</td><td>0x310</td><td>0x313</td><th>0x316</th><th>0x319</th></tr>
           <tr><td>64 тыс</td><td>0x311</td><td>0x314</td><th>0x317</th><th>0x31a</th></tr>
           <tr><td>16 млн</td><td>0x312</td><td>0x315</td><th>0x318</th><th>0x31b</th></tr>
       </table>


Если же нужно другое разрешение, тогда воспользуйтесь программой `hwinfo`:

**1.** Устанавливаем программу `hwinfo`
 
```sh
sudo apt-get install hwinfo
```

**2.** Запускаем ее с ключем `--framebuffer`
 
```sh
sudo hwinfo --framebuffer
```

в появившемся списке выберите нужный Mode для вашего разрешения и добавьте его в `vga=...` , как описано выше, в четвертом пункте.

Осталось перезагрузить компьютер и можно запускать в консоли `mplayer` или `links2` (это консольный браузер).
Позже напишу и про то с какими параметрами нужно запускать эти программы.

**P.S.**
Для ATI, всё тоже самое только в 1 и 2 пунктах, вместо `vesafb`, используйте `radeonfb`.
